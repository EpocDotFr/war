<script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.1.7/zepto.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css">
<script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>

<div>
    <label for="title">Title</label>
    <input type="text" name="title" id="title" value="{{ the_news.title if the_news }}" required>
</div>

<div>
    <label for="content">Content</label>
    <textarea name="content" id="content" required>{{ the_news.content if the_news }}</textarea>
</div>

<div>
    <label for="date">Date</label>
    <input type="datetime" name="date" id="date" value="{{ the_news.date.format('YYYY-MM-DD HH:mm') if the_news and the_news.date }}">
</div>

{% if the_news %}
<div>
    <label>Slug</label>
    <div><code>{{ the_news.slug if the_news.slug else 'None' }}</code></div>
</div>
{% endif %}

<p>
    <button type="submit">Save</button>
    {% if the_news %}<a class="btn" href="{{ url_for('one_news', slug=the_news.slug) }}">Read</a>{% endif %}
    <a href="{{ url_for('manage') }}">Cancel</a>
</p>

<script>
Zepto(function () {
    var simplemde = new SimpleMDE({
        element: $('textarea#content').get(0),
        autosave: {
            enabled: true,
            uniqueId: 'news_content{{ the_news._id if the_news }}'
        },
        indentWithTabs: false,
        tabSize: 4,
        forceSync: true,
        promptURLs: true
    });
});
</script>